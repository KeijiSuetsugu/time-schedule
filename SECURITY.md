# セキュリティチェックリスト

## 本番環境デプロイ前に確認すべき項目

### 1. 環境変数
- [ ] `JWT_SECRET` を強力なランダム文字列に変更（最低32文字以上推奨）
- [ ] `DATABASE_URL` を本番用データベース（PostgreSQL推奨）に変更
- [ ] 環境変数が漏洩しないよう、`.env` ファイルを `.gitignore` に追加済み

### 2. HTTPS
- [ ] HTTPSを有効化（必須）
- [ ] SSL証明書を適切に設定

### 3. データベース
- [ ] SQLiteからPostgreSQLなど本番用データベースに移行
- [ ] データベースのバックアップ戦略を設定
- [ ] 接続プールの設定を最適化

### 4. レート制限
- [ ] 本番環境ではRedisなど外部ストレージを使用したレート制限を検討
- [ ] 現在のインメモリレート制限はサーバー再起動でリセットされる

### 5. ログとモニタリング
- [ ] エラーログの監視システムを設定
- [ ] 異常なアクセスパターンの検知を設定

### 6. パスワードポリシー
- [ ] 必要に応じてパスワードの複雑さ要件を強化
- [ ] パスワードリセット機能の実装を検討

### 7. セッション管理
- [ ] JWTトークンの有効期限を適切に設定（現在は7日）
- [ ] トークンのリフレッシュ機能を検討

### 8. 入力検証
- [ ] すべてのAPIエンドポイントでZodによる検証が実装済み
- [ ] XSS対策（Next.jsのデフォルトで対応済み）

### 9. CORS設定
- [ ] 必要に応じてCORS設定を追加

### 10. その他
- [ ] 管理者機能の実装（必要に応じて）
- [ ] 打刻の位置情報検証を厳格化（必要に応じて）
- [ ] 打刻の承認フローを追加（必要に応じて）

